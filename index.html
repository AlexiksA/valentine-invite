<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Misiunea Valentine</title>
    <style>
        body { margin: 0; background: #ffeef2; font-family: 'Segoe UI', sans-serif; overflow: hidden; touch-action: none; }
        #ui-layer { position: absolute; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; z-index: 100; pointer-events: none; }
        .card { background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; pointer-events: auto; }
        
        canvas { display: none; background: linear-gradient(#87CEEB, #E0F6FF); width: 100vw; height: 100vh; }
        
        .btn { padding: 15px 30px; font-size: 1.2rem; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; margin: 10px; }
        #yesBtn { background: #ff4d6d; color: white; }
        #noBtn { background: #6c757d; color: white; position: relative; }

        /* Controale Mobile */
        #controls { 
            position: absolute; bottom: 20px; width: 100%; display: none; 
            justify-content: space-around; z-index: 50; padding: 0 10px; box-sizing: border-box;
        }
        .control-btn { 
            width: 70px; height: 70px; background: rgba(255, 255, 255, 0.8); 
            border: 2px solid #ff4d6d; border-radius: 50%; font-size: 1.5rem;
            display: flex; align-items: center; justify-content: center;
            user-select: none; -webkit-user-select: none;
        }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="ui-layer">
        <div id="askCard" class="card">
            <h1>Vrei sƒÉ fii Valentina mea? ‚ù§Ô∏è</h1>
            <button id="yesBtn" class="btn" onclick="startMiniGame()">DA!</button>
            <button id="noBtn" class="btn" onmouseover="moveNo()">NU</button>
        </div>

        <div id="winCard" class="card hidden">
            <h1>Ai ajuns la inima mea! üëë</h1>
            <p>Te iubesc enorm!</p>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div id="controls">
        <div style="display: flex; gap: 20px;">
            <div class="control-btn" id="leftBtn">‚¨ÖÔ∏è</div>
            <div class="control-btn" id="rightBtn">‚û°Ô∏è</div>
        </div>
        <div class="control-btn" id="jumpBtn">‚¨ÜÔ∏è</div>
    </div>

    <script>
        const PLAYER_IMAGE_URL = "https://cdn-icons-png.flaticon.com/512/190/190664.png"; 
        const QUEEN_IMAGE_URL = "https://cdn-icons-png.flaticon.com/512/3002/3002651.png";
        
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameActive = false;

        function moveNo() {
            const btn = document.getElementById('noBtn');
            btn.style.position = 'absolute';
            btn.style.left = Math.random() * 70 + '%';
            btn.style.top = Math.random() * 70 + '%';
        }

        // Configura»õie Joc
        const playerImg = new Image(); playerImg.src = PLAYER_IMAGE_URL;
        const queenImg = new Image(); queenImg.src = QUEEN_IMAGE_URL;

        let player = { 
            x: 100, y: 0, w: 60, h: 60, 
            dx: 0, dy: 0, 
            speed: 5, gravity: 0.6, 
            jumpForce: -8, maxJumpTime: 15, jumpCounter: 0, 
            isJumping: false, grounded: false 
        };

        let keys = { left: false, right: false, jump: false };
        let obstacles = [];
        let queen = { x: 2500, y: 0, w: 70, h: 70 };
        let cameraX = 0;

        function startMiniGame() {
            document.getElementById('askCard').classList.add('hidden');
            canvas.style.display = 'block';
            document.getElementById('controls').style.display = 'flex';
            resize();
            spawnObstacles();
            gameActive = true;
            requestAnimationFrame(update);
        }

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            player.y = canvas.height - 160;
            queen.y = canvas.height - 170;
        }

        function spawnObstacles() {
            for(let i = 1; i < 8; i++) {
                obstacles.push({ x: 500 * i + Math.random() * 100, y: canvas.height - 140, w: 40, h: 40 });
            }
        }

        // Control input
        const setupBtn = (id, key) => {
            const btn = document.getElementById(id);
            btn.addEventListener('touchstart', (e) => { e.preventDefault(); keys[key] = true; });
            btn.addEventListener('touchend', (e) => { e.preventDefault(); keys[key] = false; });
            btn.addEventListener('mousedown', () => keys[key] =
